<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Login - Jeopardy</title>
<link rel="stylesheet" href="quiz.css">
</head>
<body>
<div class="login-container">
    <h1>Jeopardy Login</h1>
    <input type="text" id="username" placeholder="Benutzername">
    <input type="password" id="password" placeholder="Passwort">
    <button id="loginBtn">Login</button>
    <div id="loginMessage"></div>
</div>

<script>
async function login() {
    const username = document.getElementById("username").value;
    const password = document.getElementById("password").value;
    const messageEl = document.getElementById("loginMessage");

    if(!username || !password){
        messageEl.innerText = "Bitte Benutzername und Passwort eingeben!";
        return;
    }

    try {
        const res = await fetch("/api/login", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ username, password })
        });
        const data = await res.json();
        if(data.success){
            messageEl.innerText = "Login erfolgreich!";
            // Weiterleitung je nach Rolle
            setTimeout(() => {
                if(data.role === "admin"){
                    window.location.href = "/admin.html";
                } else {
                    window.location.href = "/board.html"; // Spieler-Board
                }
            }, 500);
        } else {
            messageEl.innerText = "UngÃ¼ltige Daten!";
        }
    } catch(err){
        console.error(err);
        messageEl.innerText = "Fehler beim Login!";
    }
}

// Button Click
document.getElementById("loginBtn").addEventListener("click", login);

// Enter Taste
document.addEventListener("keydown", e => {
    if(e.key === "Enter") login();
});
</script>
</body>
</html>
