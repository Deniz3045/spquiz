<!DOCTYPE html>
<html>
<head>
<title>Admin Panel</title>
</head>
<body>

<h1>Admin Panel</h1>

<h2>Benutzer</h2>

<div id="users"></div>

<input id="username">
<input id="password">
<select id="role">
<option>player</option>
<option>editor</option>
<option>admin</option>
</select>

<button onclick="createUser()">User erstellen</button>

<hr>

<h2>Board Dateien</h2>

<div id="boards"></div>

<input id="newBoardFile">
<button onclick="createBoardFile()">Neue Datei</button>

<script>

async function loadUsers(){

const res = await fetch("/api/users");
const users = await res.json();

document.getElementById("users").innerHTML =
users.map(u=>u.username+" ("+u.role+")").join("<br>");
}

async function createUser(){

await fetch("/api/users/create",{

method:"POST",
headers:{"Content-Type":"application/json"},

body:JSON.stringify({

username:username.value,
password:password.value,
role:role.value

})
});

loadUsers();
}

async function loadBoards(){

const res = await fetch("/api/boards/files");
const boards = await res.json();

document.getElementById("boards").innerHTML =

boards.map(b=>

b.file+
" erstellt von "+b.createdBy+

` <button onclick="start('${b.file}')">
Start
</button>`

).join("<br>");
}

async function createBoardFile(){

await fetch("/api/boards/file/create",{

method:"POST",

headers:{"Content-Type":"application/json"},

body:JSON.stringify({

file:newBoardFile.value

})
});

loadBoards();
}

async function start(file){

await fetch("/api/game/start",{

method:"POST",

headers:{"Content-Type":"application/json"},

body:JSON.stringify({file})

});

window.open("/quiz.html");
}

loadUsers();
loadBoards();

</script>

</body>
</html>
