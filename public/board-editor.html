<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Board Editor</title>
<link rel="stylesheet" href="editor.css">
</head>
<body>
<div class="container">
    <h1>Board Editor</h1>
    <input id="boardName" placeholder="Board Name">
    <button id="loadBtn">Laden</button>
    <button id="saveBtn">Speichern</button>

    <div id="categoriesList"></div>
    <div class="form-row">
        <input id="categoryName" placeholder="Neue Kategorie">
        <button id="addCategoryBtn">Hinzufügen</button>
    </div>
</div>

<script>
async function fetchJSON(url,options){ const res=await fetch(url,options); return res.json(); }

document.getElementById("addCategoryBtn").addEventListener("click",()=>{
    const name=document.getElementById("categoryName").value.trim();
    if(!name) return;
    const list=document.getElementById("categoriesList");
    const div=document.createElement("div");
    div.className="categoryRow";
    div.innerHTML=`<span>${name}</span> <button onclick="this.parentNode.remove()">Löschen</button>`;
    list.appendChild(div);
    document.getElementById("categoryName").value="";
});

document.getElementById("saveBtn").addEventListener("click", async ()=>{
    const boardName=document.getElementById("boardName").value.trim();
    if(!boardName) return alert("Board Name angeben!");
    const categories=[];
    document.querySelectorAll(".categoryRow span").forEach(s=>categories.push({name:s.innerText,questions:[]}));
    const boardData={categories,multiplier:1};
    await fetchJSON("/api/boards/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileName:boardName+".json",boardData})});
    alert("Board gespeichert!");
});

</script>
</body>
</html>
