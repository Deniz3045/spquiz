<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Quiz Master</title>
<link rel="stylesheet" href="css/quiz.css">
</head>
<body>

<h1>Quiz Master</h1>

<div id="board"></div>

<div id="questionBox" class="hidden">

<h2 id="questionText"></h2>

<button onclick="showAnswer()">Antwort anzeigen</button>

<div id="answerText"></div>

<button onclick="enableBuzz()">Buzz freigeben</button>

</div>

<script src="/socket.io/socket.io.js"></script>

<script>

const socket=io();

let currentAnswer="";

async function loadBoard(){

const res=await fetch("/api/board/current");
const board=await res.json();

const div=document.getElementById("board");

board.categories.forEach(cat=>{

const catDiv=document.createElement("div");

catDiv.innerHTML=`<h3>${cat.name}</h3>`;

cat.questions.forEach(q=>{

const btn=document.createElement("button");

btn.innerText=q.value;

btn.onclick=()=>selectQuestion(q);

catDiv.appendChild(btn);

});

div.appendChild(catDiv);

});

}

function selectQuestion(q){

document.getElementById("questionText").innerText=q.question;
currentAnswer=q.answer;

document.getElementById("questionBox").classList.remove("hidden");

socket.emit("showQuestion",q);

}

function showAnswer(){

document.getElementById("answerText").innerText=currentAnswer;

}

function enableBuzz(){

socket.emit("enableBuzz");

}

loadBoard();

</script>

</body>
</html>
